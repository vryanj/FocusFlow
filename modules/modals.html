<!-- Modals -->
<div id="message-modal" class="fixed inset-0 bg-black bg-opacity-70 hidden items-center justify-center z-50 p-4">
    <div class="bg-white dark:bg-gray-800 p-8 rounded-2xl shadow-2xl text-center max-w-sm mx-auto transform transition-all scale-95">
        <p id="modal-message" class="text-lg font-semibold mb-4"></p>
        <p id="modal-emojis" class="text-6xl my-6"></p>
        <p id="modal-sub-message" class="text-base italic text-gray-500 dark:text-gray-400 mb-6"></p>
        <div id="modal-countdown" class="hidden mb-4 items-center justify-center gap-2 text-sm text-gray-500 dark:text-gray-400">
            <div class="animate-spin rounded-full h-4 w-4 border-2 border-gray-300 border-t-indigo-500"></div>
            <span>Auto-closing in <span id="modal-countdown-timer">5</span> seconds</span>
        </div>
        <button id="modal-close-btn" class="bg-indigo-500 hover:bg-indigo-600 text-white font-bold py-2 px-6 rounded-lg">OK</button>
    </div>
</div>

<div id="custom-timer-modal" class="fixed inset-0 bg-black bg-opacity-70 hidden items-center justify-center z-50 p-4">
     <div class="bg-white dark:bg-gray-800 p-8 rounded-2xl shadow-2xl max-w-sm mx-auto w-full">
        <h3 class="text-xl font-semibold mb-4 text-center">Custom Timer</h3>
        <div class="space-y-4">
            <div>
                <label for="custom-focus-input" class="block mb-1 font-medium">Focus Time (minutes)</label>
                <input id="custom-focus-input" type="number" min="1" class="w-full bg-gray-200 dark:bg-gray-700 p-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500">
            </div>
             <div>
                <label for="custom-break-input" class="block mb-1 font-medium">Break Time (minutes)</label>
                <input id="custom-break-input" type="number" min="1" class="w-full bg-gray-200 dark:bg-gray-700 p-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500">
            </div>
        </div>
        <div class="flex justify-end gap-3 mt-6">
            <button id="custom-timer-cancel" class="bg-gray-300 hover:bg-gray-400 dark:bg-gray-600 dark:hover:bg-gray-500 text-gray-800 dark:text-white font-bold py-2 px-4 rounded-lg">Cancel</button>
            <button id="custom-timer-save" class="bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-lg">Save</button>
        </div>
    </div>
</div>

<!-- Add Subtask Modal -->
<div id="add-subtask-modal" class="fixed inset-0 bg-black bg-opacity-70 hidden items-center justify-center z-50 p-4">
    <div class="bg-white dark:bg-gray-800 p-8 rounded-2xl shadow-2xl max-w-md mx-auto w-full">
        <h3 id="subtask-modal-title" class="text-xl font-semibold mb-4 text-center">Add New Subtask</h3>
        <div class="space-y-4">
            <div>
                <label for="subtask-input" class="block mb-2 font-medium">Task Description</label>
                <input id="subtask-input" type="text" placeholder="Enter your subtask..." class="w-full bg-gray-200 dark:bg-gray-700 p-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500">
            </div>
        </div>
        <div class="flex justify-end gap-3 mt-6">
            <button id="subtask-modal-cancel" class="bg-gray-300 hover:bg-gray-400 dark:bg-gray-600 dark:hover:bg-gray-500 text-gray-800 dark:text-white font-bold py-2 px-4 rounded-lg">Cancel</button>
            <button id="subtask-modal-save" class="bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-lg">Save Task</button>
        </div>
    </div>
</div>

<!-- Add Perk Modal -->
<div id="add-perk-modal" class="fixed inset-0 bg-black bg-opacity-70 hidden items-center justify-center z-50 p-4">
    <div class="bg-white dark:bg-gray-800 p-8 rounded-2xl shadow-2xl max-w-md mx-auto w-full">
        <h3 class="text-xl font-semibold mb-4 text-center">Add Perk</h3>
        <div class="space-y-4">
            <div>
                <label for="perk-name-modal-input" class="block mb-2 font-medium">Perk Name</label>
                <input id="perk-name-modal-input" type="text" placeholder="Enter perk name..." class="w-full bg-gray-200 dark:bg-gray-700 p-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500">
            </div>
            <div>
                <label for="perk-cost-modal-input" class="block mb-2 font-medium">Cost (Credits)</label>
                <input id="perk-cost-modal-input" type="number" placeholder="Enter cost..." min="1" class="w-full bg-gray-200 dark:bg-gray-700 p-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500">
            </div>
            <div>
                <label for="perk-inventory-modal-input" class="block mb-2 font-medium">Inventory (How many available)</label>
                <input id="perk-inventory-modal-input" type="number" placeholder="Enter inventory..." min="1" value="3" class="w-full bg-gray-200 dark:bg-gray-700 p-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500">
            </div>
        </div>
        <div class="flex justify-end gap-3 mt-6">
            <button id="perk-modal-cancel" class="bg-gray-300 hover:bg-gray-400 dark:bg-gray-600 dark:hover:bg-gray-500 text-gray-800 dark:text-white font-bold py-2 px-4 rounded-lg">Cancel</button>
            <button id="perk-modal-save" class="bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-lg">Add Perk</button>
        </div>
    </div>
</div>

<!-- Session History Modal -->
<div id="session-history-modal" class="fixed inset-0 bg-black bg-opacity-70 hidden items-center justify-center z-50 p-4">
    <div class="bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-2xl max-w-4xl mx-auto w-full max-h-[90vh] overflow-hidden flex flex-col">
        <div class="flex justify-between items-center mb-4">
            <h3 class="text-2xl font-semibold">Session History</h3>
            <button id="session-history-close" class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200">
                <i class="fa-solid fa-times w-6 h-6"></i>
            </button>
        </div>
        <div id="sessions-list" class="flex-grow overflow-y-auto space-y-3">
            <!-- Sessions will be dynamically added here -->
        </div>
        <div class="mt-4 pt-4 border-t border-gray-200 dark:border-gray-700 flex gap-2">
            <button id="clear-all-sessions" class="bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded-lg">
                Clear All History
            </button>
            <div class="flex-grow"></div>
            <button id="export-sessions" class="bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-lg">
                Export Sessions
            </button>
        </div>
    </div>
</div>
